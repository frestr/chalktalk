{% extends "master.html" %}

{% block title %}{% endblock %}

{% block body %}

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>

        <style>
            body{
                color: white;
            }
        </style>

        <ul id="tabs" class="center-block nav nav-tabs" data-tabs="tabs">
            {% for subject in subjects %}
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">{{ subject['name'] }}
                    <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a data-toggle="tab" href="#messages_{{ subject['name']|lower }}">Messages</a></li>
                        <li><a data-toggle="tab" href="#graphs_{{ subject['name']|lower }}">Graphs</a></li>
                    </ul>
                </li>
            {% endfor %}
        </ul>

        <div id="tab_content" class="tab-content">
            {% for subject in subjects %}
                <div id="graphs_{{ subject['name']|lower }}" class="tab-pane">
                    <p>Graphs</p>


                    <canvas id="myChart"></canvas>

                    <script>

                        var rating = {{subject['ratings']}};


                        var ctx = document.getElementById('myChart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: ['1', '2', '3', '4', '5'],
                                datasets: [{
                                    label: 'Rating',
                                    data: rating,
                                    backgroundColor: "rgba(55,125,255,0.4)"
                                }]
                            }
                        });

                    </script>


                </div>

                <div id="messages_{{ subject['name']|lower }}" class="tab-pane">
                    <table class="table">
                    <caption>Messages</caption>
                    <thead>
                        <tr>
                            <th>UserID</th>
                            <th>Subject</th>
                            <th>Rating</th>
                            <th>Comment</th>
                        </tr>
                    </thead>
                        <tbody>
                            {% for comment in subject['comments'] %}
                                <tr>
                                    <td>
                                        1234xxx
                                    </td>
                                    <td>
                                        {{ subject['name'] }}
                                    </td>
                                    <td>
                                        {{ comment[0] }}
                                    </td>
                                    <td>
                                        {{ comment[1] }}
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>

                    </table>
                </div>
            {% endfor %}
        </div>

{% endblock %}
